{% extends "base.html" %}
{% block content %}
<div class="container py-5 min-vh-100">
    <div class="text-center mb-5" data-aos="fade-up">
        <h1 class="display-3 fw-bold" style="letter-spacing: -2px;">
            <span style="color: #FF9933;">Inno</span><span class="text-dark">vation</span> <span style="color: #138808;">Suite</span>
        </h1>
        <p class="text-muted fs-5">Advanced Algorithms & Software Engineering Ecosystem of Bharat</p>
        
        <div class="col-md-5 mx-auto mt-4">
            <input type="text" id="searchProjects" class="form-control rounded-pill border-0 shadow px-4 py-3 search-bar" placeholder="Search across all systems...">
        </div>
    </div>

    <div class="d-flex justify-content-center mb-5">
        <div style="height: 4px; width: 50px; background: #FF9933;"></div>
        <div style="height: 4px; width: 50px; background: #ffffff; border: 1px solid #eee;"></div>
        <div style="height: 4px; width: 50px; background: #138808;"></div>
    </div>

    <div class="row g-4" id="projectGrid">
        {% for p in projects %}
        <div class="col-md-6 col-lg-4 project-card" 
             data-search="{{ p.name.lower() }} {{ p.language.lower() if p.language else '' }} {{ p.algorithm.lower() if p.algorithm else '' }} {{ p.category.lower() if p.category else '' }}">
            
            <div class="card h-100 border-0 shadow-sm p-4 rounded-5 glass-effect tiranga-card">
                <div class="display-3 my-4 text-center icon-box">{{ p.icon }}</div>
                
                <div class="text-center">
                    <span class="badge rounded-pill mb-2 border px-3" style="background: rgba(19, 136, 8, 0.1); color: #138808;">{{ p.category }}</span>
                </div>

                <h3 class="fw-bold h4 text-center">{{ p.name }}</h3>
                <p class="text-muted small mb-4 text-center">{{ p.desc }}</p>
                
                <button class="btn w-100 rounded-pill fw-bold mt-auto architecture-btn" 
                        data-bs-toggle="modal" 
                        data-bs-target="#modal{{ p.id }}">
                    VIEW ARCHITECTURE
                </button>
            </div>
        </div>

        <div class="modal fade" id="modal{{ p.id }}" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content border-0 rounded-5 shadow-lg overflow-hidden">
                    <div class="modal-body p-0">
                        <div class="row g-0">
                            <div class="col-lg-5 p-5 d-flex flex-column justify-content-center text-center text-white" 
                                 style="background: linear-gradient(135deg, #FF9933 0%, #212529 100%);">
                                <div class="display-1 mb-3 floating">{{ p.icon }}</div>
                                <h2 class="fw-bold">{{ p.name }}</h2>
                                <p class="small fw-bold mt-2 text-uppercase ls-1" style="color: rgba(255,255,255,0.8);">
                                    {{ p.tag if p.tag else 'Core Innovation' }}
                                </p>
                            </div>
                            
                            <div class="col-lg-7 p-5 text-dark text-start bg-white">
                                <div class="d-flex justify-content-between align-items-center mb-4">
                                    <h5 class="fw-bold m-0 text-dark">Technical Blueprint</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                
                                <div class="mb-3">
                                    <small class="text-muted d-block text-uppercase fw-bold tiny-text">Language & Stack</small>
                                    <span class="fw-bold" style="color: #FF9933;">{{ p.language if p.language else 'Python' }}</span> 
                                    <small class="text-muted">({{ p.stack if p.stack else 'Flask/SQLite' }})</small>
                                </div>

                                <div class="mb-3">
                                    <small class="text-muted d-block text-uppercase fw-bold tiny-text">Algorithm</small>
                                    <code class="fw-bold d-block p-2 bg-light rounded mt-1" style="word-break: break-all; color: #138808;">
                                        {{ p.algorithm if p.algorithm else 'Proprietary Logic' }}
                                    </code>
                                </div>

                                <div class="mb-4">
                                    <small class="text-muted d-block text-uppercase fw-bold tiny-text">System Logic</small>
                                    <div class="p-3 bg-light rounded-3 font-monospace small border-start border-4 mt-2" style="border-color: #138808 !important;">
                                        {{ p.logic if p.logic else 'Operational documentation in progress.' }}
                                    </div>
                                </div>

                                <div class="p-3 rounded-4 mt-4" style="background: rgba(19, 136, 8, 0.05); border: 1px dashed #138808;">
                                    <h6 class="fw-bold mb-1">Scale this System?</h6>
                                    <a href="/collaborate" class="text-decoration-none fw-bold" style="color: #138808;">Contact Engineers â†’</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<style>
    /* Search Bar Tiranga Focus */
    .search-bar { 
        box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
        border-bottom: 3px solid #eee !important;
    }
    .search-bar:focus { 
        border-bottom: 3px solid #FF9933 !important; 
        box-shadow: 0 10px 30px rgba(255, 153, 51, 0.1); 
    }

    /* Card Tiranga Hover Effect */
    .tiranga-card {
        border-top: 3px solid #FF9933 !important;
        border-bottom: 3px solid #138808 !important;
        transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
    }

    .glass-effect:hover { 
        transform: translateY(-10px); 
        box-shadow: 0 20px 40px rgba(0,0,0,0.1) !important; 
        background: #fff;
    }

    /* Tiranga Button */
    .architecture-btn {
        background: transparent;
        border: 2px solid #212529;
        color: #212529;
        transition: 0.3s;
    }

    .architecture-btn:hover {
        background: #212529;
        color: #fff;
    }

    .ls-1 { letter-spacing: 1px; }
    .tiny-text { font-size: 0.7rem; }
    .floating { animation: float 3s ease-in-out infinite; }
    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-8px); }
    }
</style>

<script>
    const search = document.getElementById('searchProjects');
    const projectCards = document.querySelectorAll('.project-card');

    search.addEventListener('input', () => {
        const term = search.value.toLowerCase().trim();
        projectCards.forEach(card => {
            const searchText = card.getAttribute('data-search');
            card.style.display = searchText.includes(term) ? 'block' : 'none';
        });
    });
</script>
{% endblock %}